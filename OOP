#include <iostream>
#include <cstring>
using namespace std;

void ShowMenu();
void MakeAccount();
void DepositMoney();
void WithdrawMoney();
void ShowAllAccount();

class Account
{
  private:
    int accID;
    int balance;
    char * Name;
  public:
    Account(int _accID, int _balance, char * _Name): accID(_accID), balance(_balance)
    {
      Name = new char[strlen(_Name)+1];
      strcpy(Name,_Name);
    } //생성자

    Account(const Account& copy):accID(copy.accID), balance(copy.balance)
    {
      Name = new char[strlen(copy.Name)+1];
      strcpy(Name,copy.Name);
    } //깊은 복사 생성자

    int GetID() const
    {
      return accID;
    }

    void Deposit(int money)
    {
      balance+=money;
    }

    void Withdraw(int money)
    {
      balance-=money;
    }

    void ShowAllInfo() const
    {
      cout<<"계좌ID:"<<accID<<endl;
      cout<<"이 름:"<<Name<<endl;
      cout<<"잔 액:"<<balance<<endl;
    }

    ~Account()
    {
      delete []Name;
    }
};

Account * accArr[100];
int accNum = 0;               //저장된 계좌 수

int main()
{
  int choice;
  while(1)
  {
    ShowMenu();
    cout<<"선택: ";
    cin>>choice;
    cout<<endl;
    if(choice == 1)
      MakeAccount();
    else if(choice == 2)
      DepositMoney();
    else if(choice == 3)
      WithdrawMoney();
    else if(choice == 4)
      ShowAllAccount();
    else if(choice == 5)
      break;
    else if(choice<1 || choice>5)
      cout<<"Invalid Input! Choose A Number Between 1 to 5!"<<endl;
  }
}


void ShowMenu()
{
  cout<<endl;
  cout<<"------Menu------"<<endl;
  cout<<"1. 계좌 개설"<<endl;
  cout<<"2. 입 금"<<endl;
  cout<<"3. 출 금"<<endl;
  cout<<"4. 계좌정보 전체 출력"<<endl;
  cout<<"5. 프로그램 종료!"<<endl<<endl;
}

void MakeAccount()
{
  int id;
  char NAME[20];
  int money;

  cout<<"[계좌 개설]"<<endl;
  cout<<"계좌 ID:"; cin>>id;
  cout<<"이 름:"; cin>>NAME;
  cout<<"입금액:"; cin>>money;

  accArr[accNum++] = new Account(id,money,NAME); 
  /*
  accArr[accNum].accID = id;
  accArr[accNum].balance = money;
  strcpy(accArr[accNum].Name,NAME);
  accNum++;
  */
}

void DepositMoney()
{
  int Daccount;
  int deposit;
  cout<<"[입   금]"<<endl;
  cout<<"계좌 ID:"; cin>>Daccount;
  cout<<"입금액:"; cin>>deposit;

  for(int i=0; i<accNum; i++)
  {
    if(accArr[i]->GetID() == Daccount)
    {
      accArr[i]->Deposit(deposit);
      cout<<"---입금 완료---"<<endl;
      return;
    }
  }
}

void WithdrawMoney()
{
  int Waccount;
  int withdraw;
  cout<<"[출  금]"<<endl;
  cout<<"계좌 ID:"; cin>>Waccount;
  cout<<"출금액:"; cin>>withdraw;

  for(int i=0; i<accNum; i++)
  {
    if(accArr[i]->GetID() == Waccount)
    {
      accArr[i]->Withdraw(withdraw);
      cout<<"---출금 완료---"<<endl;
      return;
    }
  }
}

void ShowAllAccount()
{
  for(int i=0; i<=accNum; i++)
  {
      accArr[i]->ShowAllInfo();
      cout<<endl;
  }
}
